<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>arcsdec::v_1_0_0::BlockCreator class | libarcsdec Audio decoder and TOC parser adapters for libarcstk</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark+documentation.compiled.css" />
  <link rel="icon" href="favicon-dark.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <span id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">
        <a href="https://codeberg.org/tristero/libarcsdec/">libarcsdec</a> <span class="m-breadcrumb">|</span> <a href="index.html" class="m-thin">Audio decoder and TOC parser adapters for libarcstk</a>
      </span>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path id="m-doc-search-icon-path" d="m6 0c-3.31 0-6 2.69-6 6 0 3.31 2.69 6 6 6 1.49 0 2.85-0.541 3.89-1.44-0.0164 0.338 0.147 0.759 0.5 1.15l3.22 3.79c0.552 0.614 1.45 0.665 2 0.115 0.55-0.55 0.499-1.45-0.115-2l-3.79-3.22c-0.392-0.353-0.812-0.515-1.15-0.5 0.895-1.05 1.44-2.41 1.44-3.89 0-3.31-2.69-6-6-6zm0 1.56a4.44 4.44 0 0 1 4.44 4.44 4.44 4.44 0 0 1-4.44 4.44 4.44 4.44 0 0 1-4.44-4.44 4.44 4.44 0 0 1 4.44-4.44z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="modules.html">Modules</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="2">
            <li><a href="namespaces.html">Namespaces</a></li>
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="files.html">Files</a></li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <use href="#m-doc-search-icon-path" />
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          <span class="m-breadcrumb"><a href="namespacearcsdec.html">arcsdec</a>::<wbr/></span>v_1_0_0::BlockCreator <span class="m-thin">class</span>
          <div class="m-doc-include m-code m-inverted m-text-right"><span class="cp">#include</span> <a class="cpf" href="audiobuffer_8hpp.html">&lt;audiobuffer.hpp&gt;</a></div>
        </h1>
        <p>Base class of a sample block creator.</p>
        <div class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li>
              Reference
              <ul>
                <li><a href="#derived-classes">Derived classes</a></li>
                <li><a href="#typeless-methods">Constructors, destructors, conversion operators</a></li>
                <li><a href="#pub-methods">Public functions</a></li>
                <li><a href="#pro-methods">Protected functions</a></li>
              </ul>
            </li>
          </ul>
        </div>
<p>Readers that pull their blocks from the filesystem can control the size of the blocks directly. This does not restrict them to read the entire block at once. On the other hand, readers that are pushed their blocks to via some callback have to accumulate samples until a block is complete.</p><p>The <a href="classarcsdec_1_1v__1__0__0_1_1BlockCreator.html" class="m-doc">BlockCreator</a> is the abstraction of these different policies. It encapsulates a sample buffer which a size can be adjusted to and a consumer that the blocks are passed to once they are complete. Subclasses can control what happens when a block is complete by overriding method block_complete(). Althoug <a href="classarcsdec_1_1v__1__0__0_1_1BlockCreator.html" class="m-doc">BlockCreator</a> is not abstract and could be instantiated, it is intended as a mere blueprint for subclasses.</p>
        <section id="derived-classes">
          <h2><a href="#derived-classes">Derived classes</a></h2>
          <dl class="m-doc">
            <dt>
              class <a href="classarcsdec_1_1v__1__0__0_1_1BlockAccumulator.html" class="m-doc">v_1_0_0::BlockAccumulator</a> <span class="m-label m-flat m-warning">virtual</span>
            </dt>
            <dd>Basic buffer: specify size, fill with samples and then flush.</dd>
            <dt>
              class <a href="classarcsdec_1_1v__1__0__0_1_1details_1_1wave_1_1PCMBlockReader.html" class="m-doc">PCMBlockReader</a>
            </dt>
            <dd>Implements pull reading PCM samples from a std::ifstream.</dd>
          </dl>
        </section>
        <section id="typeless-methods">
          <h2><a href="#typeless-methods">Constructors, destructors, conversion operators</a></h2>
          <dl class="m-doc">
            <dt id="a50fc0170737be17c3e0904ca6f422ddb">
              <span class="m-doc-wrap-bumper"><a href="#a50fc0170737be17c3e0904ca6f422ddb" class="m-doc-self">BlockCreator</a>(</span><span class="m-doc-wrap">)</span>
            </dt>
            <dd>Constructs a <a href="classarcsdec_1_1v__1__0__0_1_1BlockCreator.html" class="m-doc">BlockCreator</a> with buffer of size BLOCKSIZE::DEFAULT.</dd>
            <dt>
              <span class="m-doc-wrap-bumper"><a href="#a3344a16312e0e8a7b215dfe2c16cfc70" class="m-doc">BlockCreator</a>(</span><span class="m-doc-wrap">const int32_t samples_per_block) <span class="m-label m-flat m-info">explicit</span> </span>
            </dt>
            <dd>Constructs a <a href="classarcsdec_1_1v__1__0__0_1_1BlockCreator.html" class="m-doc">BlockCreator</a> with buffer of size samples_per_block.</dd>
            <dt id="aa31f03a7d96ebf2a18ef12edc8091e29">
              <span class="m-doc-wrap-bumper"><a href="#aa31f03a7d96ebf2a18ef12edc8091e29" class="m-doc-self">~BlockCreator</a>(</span><span class="m-doc-wrap">) <span class="m-label m-flat m-warning">virtual</span> <span class="m-label m-flat m-success">noexcept</span></span>
            </dt>
            <dd>Virtual default destructor.</dd>
          </dl>
        </section>
        <section id="pub-methods">
          <h2><a href="#pub-methods">Public functions</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a58b22755ed9ce5c573fa433029a939c9" class="m-doc">samples_per_block</a>(</span><span class="m-doc-wrap">) const -&gt; int32_t</span>
            </dt>
            <dd>Return the maximal number of samples a block can contain.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a59b76db4842dd172499bc416251d1d87" class="m-doc">set_samples_per_block</a>(</span><span class="m-doc-wrap">const int32_t samples_per_block)</span>
            </dt>
            <dd>Set the maximal number of samples a block can contain.</dd>
          </dl>
        </section>
        <section id="pro-methods">
          <h2><a href="#pro-methods">Protected functions</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a05e532dbf5c353bfad3bdd978b2ab946" class="m-doc">clip_samples_per_block</a>(</span><span class="m-doc-wrap">const int32_t samples_per_block) const -&gt; int32_t</span>
            </dt>
            <dd>Clip the parameter to be between the values of <a href="classarcsdec_1_1v__1__0__0_1_1BlockCreator.html#a37d596ec3d11abce0a413ace4dcec33d" class="m-doc">min_<wbr />samples_<wbr />per_<wbr />block()</a> and <a href="classarcsdec_1_1v__1__0__0_1_1BlockCreator.html#a68ace5cb7e44234aab942e190982446b" class="m-doc">max_<wbr />samples_<wbr />per_<wbr />block()</a>.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a68ace5cb7e44234aab942e190982446b" class="m-doc">max_samples_per_block</a>(</span><span class="m-doc-wrap">) const -&gt; int32_t <span class="m-label m-flat m-warning">virtual</span></span>
            </dt>
            <dd>Returns the maximum block size of this instance.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a37d596ec3d11abce0a413ace4dcec33d" class="m-doc">min_samples_per_block</a>(</span><span class="m-doc-wrap">) const -&gt; int32_t <span class="m-label m-flat m-warning">virtual</span></span>
            </dt>
            <dd>Returns the minimum block size of this instance.</dd>
          </dl>
        </section>
        <section>
          <h2>Function documentation</h2>
          <section class="m-doc-details" id="a3344a16312e0e8a7b215dfe2c16cfc70"><div>
            <h3>
              <span class="m-doc-wrap-bumper"> arcsdec::<wbr />v_1_0_0::<wbr />BlockCreator::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a3344a16312e0e8a7b215dfe2c16cfc70" class="m-doc-self">BlockCreator</a>(</span><span class="m-doc-wrap">const int32_t samples_per_block) <span class="m-label m-info">explicit</span> </span></span>
            </h3>
            <p>Constructs a <a href="classarcsdec_1_1v__1__0__0_1_1BlockCreator.html" class="m-doc">BlockCreator</a> with buffer of size samples_per_block.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">samples_per_block&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>Number of 32 bit PCM samples in one block</td>
                </tr>
              </tbody>
            </table>
          </div></section>
          <section class="m-doc-details" id="a58b22755ed9ce5c573fa433029a939c9"><div>
            <h3>
              <span class="m-doc-wrap-bumper">int32_t arcsdec::<wbr />v_1_0_0::<wbr />BlockCreator::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a58b22755ed9ce5c573fa433029a939c9" class="m-doc-self">samples_per_block</a>(</span><span class="m-doc-wrap">) const</span></span>
            </h3>
            <p>Return the maximal number of samples a block can contain.</p>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>The number of 32 bit PCM samples that the block can store</td>
                </tr>
              </tfoot>
            </table>
          </div></section>
          <section class="m-doc-details" id="a59b76db4842dd172499bc416251d1d87"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void arcsdec::<wbr />v_1_0_0::<wbr />BlockCreator::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a59b76db4842dd172499bc416251d1d87" class="m-doc-self">set_samples_per_block</a>(</span><span class="m-doc-wrap">const int32_t samples_per_block)</span></span>
            </h3>
            <p>Set the maximal number of samples a block can contain.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">samples_per_block&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>The number of 32 bit PCM samples in one block</td>
                </tr>
              </tbody>
            </table>
          </div></section>
          <section class="m-doc-details" id="a05e532dbf5c353bfad3bdd978b2ab946"><div>
            <h3>
              <span class="m-doc-wrap-bumper">int32_t arcsdec::<wbr />v_1_0_0::<wbr />BlockCreator::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a05e532dbf5c353bfad3bdd978b2ab946" class="m-doc-self">clip_samples_per_block</a>(</span><span class="m-doc-wrap">const int32_t samples_per_block) const <span class="m-label m-warning">protected</span></span></span>
            </h3>
            <p>Clip the parameter to be between the values of <a href="classarcsdec_1_1v__1__0__0_1_1BlockCreator.html#a37d596ec3d11abce0a413ace4dcec33d" class="m-doc">min_<wbr />samples_<wbr />per_<wbr />block()</a> and <a href="classarcsdec_1_1v__1__0__0_1_1BlockCreator.html#a68ace5cb7e44234aab942e190982446b" class="m-doc">max_<wbr />samples_<wbr />per_<wbr />block()</a>.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">samples_per_block&nbsp;<span class="m-label m-flat m-info">in</span></td>
                  <td>Requested number of samples per block</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>Valid number of samples per block</td>
                </tr>
              </tfoot>
            </table>
          </div></section>
          <section class="m-doc-details" id="a68ace5cb7e44234aab942e190982446b"><div>
            <h3>
              <span class="m-doc-wrap-bumper">int32_t arcsdec::<wbr />v_1_0_0::<wbr />BlockCreator::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a68ace5cb7e44234aab942e190982446b" class="m-doc-self">max_samples_per_block</a>(</span><span class="m-doc-wrap">) const <span class="m-label m-warning">virtual</span> <span class="m-label m-warning">protected</span></span></span>
            </h3>
            <p>Returns the maximum block size of this instance.</p>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>Maximum number of samples per block</td>
                </tr>
              </tfoot>
            </table>
          </div></section>
          <section class="m-doc-details" id="a37d596ec3d11abce0a413ace4dcec33d"><div>
            <h3>
              <span class="m-doc-wrap-bumper">int32_t arcsdec::<wbr />v_1_0_0::<wbr />BlockCreator::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a37d596ec3d11abce0a413ace4dcec33d" class="m-doc-self">min_samples_per_block</a>(</span><span class="m-doc-wrap">) const <span class="m-label m-warning">virtual</span> <span class="m-label m-warning">protected</span></span></span>
            </h3>
            <p>Returns the minimum block size of this instance.</p>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>Minimum number of samples per block</td>
                </tr>
              </tfoot>
            </table>
          </div></section>
        </section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>
          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search-v1.js"></script>
<script src="searchdata-v1.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>libarcsdec Audio decoder and TOC parser adapters for libarcstk. Created with <a href="https://doxygen.org/">Doxygen</a> 1.8.20 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
